Docker
â”œâ”€â”€ 1. Docker Basics (Quick Recap)
â”‚   â”œâ”€â”€ Docker Architecture: CLI, Daemon, REST API
â”‚   â”œâ”€â”€ Docker Images vs Containers
â”‚   â”œâ”€â”€ Lifecycle: build â†’ run â†’ stop â†’ remove
â”‚   â”œâ”€â”€ Important CLI: build, run, ps, stop, rm, rmi, exec, logs

â”œâ”€â”€ 2. Dockerfile (Interview + Troubleshooting)
â”‚   â”œâ”€â”€ Instructions: FROM, RUN, COPY, CMD, ENTRYPOINT, ENV, VOLUME
â”‚   â”œâ”€â”€ Multi-stage builds (optimize image size)
â”‚   â”œâ”€â”€ Common Issues:
â”‚   â”‚   â”œâ”€â”€ Cache not invalidating
â”‚   â”‚   â”œâ”€â”€ Incorrect CMD/ENTRYPOINT
â”‚   â”‚   â”œâ”€â”€ Permissions and PATH issues

â”œâ”€â”€ 3. Docker Images
â”‚   â”œâ”€â”€ Image creation & tagging
â”‚   â”œâ”€â”€ Image layers, caching, squashing
â”‚   â”œâ”€â”€ Image size optimization
â”‚   â”œâ”€â”€ Vulnerability scanning (e.g., Trivy, Docker scan)
â”‚   â”œâ”€â”€ Common Issues:
â”‚   â”‚   â”œâ”€â”€ Image bloat
â”‚   â”‚   â”œâ”€â”€ Not updating from base image
â”‚   â”‚   â”œâ”€â”€ Wrong tag/image pulled

â”œâ”€â”€ 4. Docker Containers (Heavy Troubleshooting)
â”‚   â”œâ”€â”€ Lifecycle states: created, running, exited, paused
â”‚   â”œâ”€â”€ Start/stop/restart behavior
â”‚   â”œâ”€â”€ Healthcheck & auto-restart policies
â”‚   â”œâ”€â”€ Common Issues:
â”‚   â”‚   â”œâ”€â”€ Container exits immediately
â”‚   â”‚   â”œâ”€â”€ Restart loops
â”‚   â”‚   â”œâ”€â”€ High CPU/memory usage
â”‚   â”‚   â”œâ”€â”€ Crash loop debugging (logs, inspect, strace)

â”œâ”€â”€ 5. Volumes & Storage (Interview + Real Issues)
â”‚   â”œâ”€â”€ Volume types: named, bind mount, tmpfs
â”‚   â”œâ”€â”€ Data persistence strategies
â”‚   â”œâ”€â”€ Docker volume inspect, prune, rm
â”‚   â”œâ”€â”€ Common Issues:
â”‚   â”‚   â”œâ”€â”€ Data loss
â”‚   â”‚   â”œâ”€â”€ Permission denied inside container
â”‚   â”‚   â”œâ”€â”€ Read-only filesystem

â”œâ”€â”€ 6. Docker Networking (High-Weight in Interviews)
â”‚   â”œâ”€â”€ Bridge, Host, None, Overlay (for Swarm)
â”‚   â”œâ”€â”€ Port binding vs exposing
â”‚   â”œâ”€â”€ DNS in Docker
â”‚   â”œâ”€â”€ Inter-container communication
â”‚   â”œâ”€â”€ Troubleshooting:
â”‚   â”‚   â”œâ”€â”€ Container can't connect outside
â”‚   â”‚   â”œâ”€â”€ Port conflicts
â”‚   â”‚   â”œâ”€â”€ IP tables/NAT issues
â”‚   â”‚   â”œâ”€â”€ DNS resolution inside container

â”œâ”€â”€ 7. Logs & Debugging
â”‚   â”œâ”€â”€ docker logs, docker inspect
â”‚   â”œâ”€â”€ journalctl (for daemon), dmesg (kernel-level), syslog
â”‚   â”œâ”€â”€ Exec inside container: `docker exec -it`
â”‚   â”œâ”€â”€ Debugging with Alpine/Bash + curl/ping/tcpdump

â”œâ”€â”€ 8. Security (Important for Senior Interviews)
â”‚   â”œâ”€â”€ Dockerfile hardening (USER, no root)
â”‚   â”œâ”€â”€ Secrets management (avoid ENV with secrets)
â”‚   â”œâ”€â”€ Image scanning tools (Trivy, Grype, Docker scan)
â”‚   â”œâ”€â”€ Capabilities dropping
â”‚   â”œâ”€â”€ seccomp, apparmor profiles
â”‚   â”œâ”€â”€ Docker socket security risks
â”‚   â”œâ”€â”€ Docker Content Trust (DCT)
â”‚   â”œâ”€â”€ Troubleshooting:
â”‚   â”‚   â”œâ”€â”€ Permissions issues
â”‚   â”‚   â”œâ”€â”€ Escalation vulnerabilities

â”œâ”€â”€ 9. Docker Compose (Essentials only)
â”‚   â”œâ”€â”€ Compose file structure
â”‚   â”œâ”€â”€ Networks and volumes in Compose
â”‚   â”œâ”€â”€ Override files and env handling
â”‚   â”œâ”€â”€ Logs and troubleshooting multi-container apps

â”œâ”€â”€ 10. Docker Integration with DevOps Tools
â”‚   â”œâ”€â”€ Jenkins (Docker-in-Docker, builds, cleanups)
â”‚   â”œâ”€â”€ GitLab CI/CD
â”‚   â”œâ”€â”€ AppDynamics/Prometheus/Grafana agent containers
â”‚   â”œâ”€â”€ ECR (Push/Pull), ECS/Fargate (overview)
â”‚   â”œâ”€â”€ Scanning in CI pipelines

â”œâ”€â”€ 11. Docker Daemon (Advanced Troubleshooting)
â”‚   â”œâ”€â”€ /var/lib/docker layout
â”‚   â”œâ”€â”€ docker info / events
â”‚   â”œâ”€â”€ Restart Docker safely
â”‚   â”œâ”€â”€ Config changes in `/etc/docker/daemon.json`
â”‚   â”œâ”€â”€ Checking journald/syslog for errors
â”‚   â”œâ”€â”€ Troubleshooting:
â”‚   â”‚   â”œâ”€â”€ Daemon won't start
â”‚   â”‚   â”œâ”€â”€ Resource starvation
â”‚   â”‚   â”œâ”€â”€ Out of disk/inodes
â”‚   â”‚   â”œâ”€â”€ Overlay2 corruption

â”œâ”€â”€ 12. Common Real-time Scenarios
â”‚   â”œâ”€â”€ High CPU/Memory inside a container
â”‚   â”œâ”€â”€ Disk space filling in /var/lib/docker
â”‚   â”œâ”€â”€ Container restart loops (healthcheck failures)
â”‚   â”œâ”€â”€ Network not reachable from inside
â”‚   â”œâ”€â”€ Docker logs not working (json-file full)
â”‚   â”œâ”€â”€ Canâ€™t exec or get bash in lightweight containers

â””â”€â”€ 13. Bonus: Docker Alternatives and Future Topics
    â”œâ”€â”€ Podman vs Docker
    â”œâ”€â”€ Containerd and CRI-O
    â”œâ”€â”€ Rootless Docker
    â”œâ”€â”€ BuildKit advanced use


~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~``
  ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~```

| Component    | Role                           | When it Fails                    | Troubleshooting Tip             |
| ------------ | ------------------------------ | -------------------------------- | ------------------------------- |
| **CLI**      | Sends command                  | Command hangs or fails           | `docker info`, check socket     |
| **REST API** | Middleman between CLI & Daemon | API tool fails, socket issues    | `curl /var/run/docker.sock`     |
| **Daemon**   | Executes the actual work       | No containers start, Docker down | `systemctl status docker`, logs |

------
  Permissions issue in image	Check USER in Dockerfile
------
  | Problem                         | How to Check / Fix                                    |
| ------------------------------- | ----------------------------------------------------- |
| Image doesn't exist locally     | `docker images`, try `docker pull`                    |
| Permissions issue in image      | Check `USER` in Dockerfile                            |
| Misconfigured CMD or ENTRYPOINT | Use `docker inspect`, fix Dockerfile                  |
| Volume mount errors             | Check volume paths: `docker volume ls`, `ls -l /path` |
| ENV variables missing           | Confirm `docker run -e` or `Dockerfile ENV`           |

-----------------------------
  trivy scan:install based on OS 
# Basic scan
trivy image nginx:1.23

# Scan with only HIGH and CRITICAL issues
trivy image --severity HIGH,CRITICAL nginx:1.23
- Trivy scanning is used to find known security vulnerabilities (CVEs) in Docker images, filesystems, or configuration files by analyzing packages and dependencies against public vulnerability databases.
  
  ----------------------------
dcker volumes:
| Volume Type | Command Example                             | Where Stored                          | Advantages                                                       | Real-Time Usage in Prod                                   | Common Interview Points                                               |
|-------------|----------------------------------------------|----------------------------------------|------------------------------------------------------------------|------------------------------------------------------------|------------------------------------------------------------------------|
| Named       | -v myvolume:/data <br> docker volume create myvolume | /var/lib/docker/volumes/               | Persistent, portable, safe for multi-host use                   | Databases, shared logs/configs                             | Backup, inspect, restore, default choice in prod                      |
| Bind Mount  | -v /host/path:/container/path               | Exact host path on host                | Real-time sync, host control, great for configs/logs            | Certs, logs, configs injection                             | When to use, file permission issues, host dependency risks            |
| tmpfs       | --tmpfs /tmp                                | RAM only                               | Fastest, avoids disk writes, ideal for secrets/temp storage     | Cache, API tokens, temp build artifacts                    | Secure for secrets, no disk IO, when to avoid                         |

| **Volume Type** | **Command Example**                                    | **Where Stored**                            | **Advantages**                                                          | **Real-Time Usage in Prod**                                             | **Common Interview Points**                                                    |
| --------------- | ------------------------------------------------------ | ------------------------------------------- | ----------------------------------------------------------------------- | ----------------------------------------------------------------------- | ------------------------------------------------------------------------------ |
| **Named**       | `-v myvolume:/data`<br>`docker volume create myvolume` | `/var/lib/docker/volumes/` (Docker managed) | - Persistent, easy to manage<br>- Portable<br>- Safe for multi-host use | - Databases (MySQL, MongoDB)<br>- Shared logs/configs across containers | - Best choice in prod<br>- How to back up<br>- Inspect & restore volumes       |
| **Bind Mount**  | `-v /host/path:/container/path`                        | Exact host path                             | - Full control<br>- Real-time sync with host<br>- Great for config/logs | - Log file storage<br>- External certs/configs injection                | - When to prefer bind<br>- Risks (host dependency)<br>- File permission issues |
| **tmpfs**       | `--tmpfs /tmp`                                         | RAM only (not disk)                         | - Fastest<br>- No disk writes<br>- Secure for temp/secrets              | - API tokens<br>- Cache<br>- Temp build artifacts                       | - How tmpfs avoids disk IO<br>- Use for secrets<br>- When not to use tmpfs     |

###############################################################################
| **Network Type**           | **Command Example**                                                 | **Use Case / Behavior**                                                                                                                     | **Advantages**                                                                                         | **Real-world Usage**                                                  | **Interview + Troubleshooting Points**                                                                                                                                                                               |
| -------------------------- | ------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------ | --------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **Bridge (Default)**       | `docker network create mybridge`<br>`docker run --network mybridge` | - Isolated network on a single host<br>- Uses virtual Ethernet bridge (`docker0` by default)<br>- Internal DNS resolves container names     | - Easy container-to-container communication<br>- DNS support<br>- Good for dev/testing                 | - Apps with frontend-backend on same host<br>- Docker Compose default | ğŸ”¸ Why containers canâ€™t talk?<br>ğŸ”¸ Check `bridge` exists: `docker network ls`<br>ğŸ”¸ `docker network inspect mybridge`<br>ğŸ”¸ DNS failure â†’ check `/etc/docker/daemon.json`                                           |
| **Host**                   | `docker run --network host`                                         | - Shares hostâ€™s network namespace<br>- No isolation at all<br>- Skips NAT, ports                                                            | - Highest performance<br>- Useful for metrics/logging agents<br>- Low latency                          | - Prometheus exporters<br>- High-performance microservices            | ğŸ”¸ Port conflicts: container uses same port as host<br>ğŸ”¸ No isolation: security concerns<br>ğŸ”¸ Can't expose multiple containers on same port                                                                        |
| **None**                   | `docker run --network none`                                         | - Container has **no network access**<br>- Loopback only<br>- No DNS, no interface                                                          | - High isolation<br>- Good for sandboxing and testing<br>- Security hardened                           | - Air-gapped processes<br>- Debugging boot-time behavior              | ğŸ”¸ Can't ping anything? Thatâ€™s expected<br>ğŸ”¸ Use for container initialization tests or file-processing jobs<br>ğŸ”¸ Combine with volume for output                                                                    |
| **Overlay** *(Swarm only)* | `docker network create -d overlay myoverlay`                        | - Enables multi-host container networking<br>- Built on VXLAN tunnel<br>- Uses Dockerâ€™s internal distributed KV store (Raft)                | - Cross-node communication<br>- Secure (encryption optional)<br>- Dynamic DNS<br>- Auto load-balancing | - Swarm-based microservices<br>- HA containers across VMs             | ğŸ”¸ Service not reachable? Check `docker service ps`<br>ğŸ”¸ Use `docker network inspect` on all nodes<br>ğŸ”¸ DNS name mismatch? Use service name not container name<br>ğŸ”¸ Confirm Swarm is active with `docker node ls` |
| **Macvlan**                | `docker network create -d macvlan ...`                              | - Assigns a **real IP** from the LAN to the container<br>- Bypasses Docker's bridge routing<br>- Acts like a physical device on the network | - Full L2 network access<br>- Can talk to LAN as a peer<br>- Better for legacy app communication       | - Legacy apps needing real IP<br>- Running DHCP/DNS/VoIP containers   | ğŸ”¸ Host canâ€™t talk to container? Expected due to macvlan<br>ğŸ”¸ Requires specific physical NIC<br>ğŸ”¸ IP address management is manual                                                                                  |

  
########################################################################################33
security:
| **Do This**                                                          | **Donâ€™t Do This**                                           |
| -------------------------------------------------------------------- | ----------------------------------------------------------- |
| âœ… Use non-root user via `USER` in Dockerfile                         | âŒ Run as `root` in containers                               |
| âœ… Use Docker secrets for passwords                                   | âŒ Set passwords in `ENV` variables                          |
| âœ… Scan images using `Trivy` or `Grype`                               | âŒ Use outdated images without security scans                |
| âœ… Drop unused Linux capabilities                                     | âŒ Grant all capabilities by default                         |
| âœ… Enable seccomp/apparmor for system call control                    | âŒ Run containers without any syscall restriction            |
| âœ… Protect Docker socket or use minimal-proxy containers              | âŒ Mount full Docker socket directly into containers         |
| âœ… Pull signed images with DCT enabled                                | âŒ Pull unsigned or unverified images from untrusted sources |
| âœ… Use minimal, hardened base images (Alpine, Distroless)             | âŒ Use bloated OS images like `ubuntu:latest` unnecessarily  |
| âœ… Make container filesystem read-only if write access is not needed  | âŒ Let all containers have write access by default           |
| âœ… Log and monitor container activity with tools like Falco or Sysdig | âŒ Ignore runtime events or container audit logs             |

| **Security Area**        | **What It Helps With**               | **Do This (âœ…)**                                 | **Avoid This (âŒ)**                           | **Quick Fix / Troubleshooting**                    |
| ------------------------ | ------------------------------------ | ----------------------------------------------- | -------------------------------------------- | -------------------------------------------------- |
| **Dockerfile Hardening** | Prevent misuse of root privileges    | Use `USER`, `alpine` image                      | Donâ€™t use `root` or bloated base images      | App crash? â†’ Check permissions or ownership        |
| **Secrets Handling**     | Hides sensitive data from images     | Use secrets file or Swarm secrets               | Donâ€™t put secrets in `ENV`                   | Leaked secrets? â†’ Run `docker inspect`             |
| **Image Scanning**       | Detects known vulnerabilities (CVEs) | Use `trivy`, scan in CI/CD                      | Donâ€™t push unscanned images to prod          | CVE found? â†’ Update base image or patch            |
| **Drop Capabilities**    | Lowers attack surface                | Use `--cap-drop=ALL`, add minimal needed caps   | Donâ€™t run with all capabilities              | Broken feature? â†’ Check missing caps in logs       |
| **seccomp**              | Limits harmful syscalls              | Use default/custom profile                      | Donâ€™t run without syscall restrictions       | Blocked syscall? â†’ Check Docker or syslog          |
| **AppArmor/SELinux**     | Enforces security policies           | Apply trusted profiles (e.g., `docker-default`) | Donâ€™t disable MAC (Mandatory Access Control) | Permission denied? â†’ Audit AppArmor/SELinux logs   |
| **Docker Socket Access** | Prevents container root access       | Avoid mounting `docker.sock`                    | Donâ€™t mount unless *really* needed           | Mounted socket? â†’ Use `docker-proxy` or read-only  |
| **Docker Content Trust** | Verifies image integrity             | Set `DOCKER_CONTENT_TRUST=1`                    | Donâ€™t pull unsigned or untrusted images      | Pull failing? â†’ Ensure image is signed with Notary |
| **Read-Only Filesystem** | Prevents unwanted file writes        | Use `--read-only`, mount volume for logs/data   | Donâ€™t let containers write to full FS        | App crash? â†’ Mount writable volume                 |
| **Audit Runtime**        | Detects unusual behavior             | Use `Falco`, `Sysdig`, or `Auditd`              | Donâ€™t run without runtime monitoring         | Suspicious activity? â†’ Check audit logs            |

######################################################################333
| **Topic**           | **What is it?**                                                              | **Why use it?**                                         | **When to use it?**                                                   | **How to troubleshoot?**                                                                                   | **How a Developer Might Ask You**                                                   |
| ------------------- | ---------------------------------------------------------------------------- | ------------------------------------------------------- | --------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------- | ----------------------------------------------------------------------------------- |
| **Podman**          | A daemonless container engine, compatible with Docker CLI                    | More secure (rootless by default), no daemon to exploit | When security policies restrict Docker daemon usage                   | - Use `podman logs`, `podman ps` <br> - Debug rootless issues with `--log-level=debug`                     | "Can you replace Docker with Podman in a rootless production setup?"                |
| **Containerd**      | Lightweight container runtime used under Docker                              | Used by Kubernetes; faster and modular                  | When working with Kubernetes CRI directly without full Docker engine  | - Check `containerd` logs: `/var/log/containerd.log` <br> - Use `ctr` CLI for deep debug                   | "Why Kubernetes prefers containerd over Docker in recent versions?"                 |
| **CRI-O**           | Kubernetes-native container runtime, lightweight and built for CRI           | Focused only on Kubernetes workloads; OpenShift uses it | For OpenShift clusters or strict Kubernetes-native environments       | - Check `crio` logs: `/var/log/crio/crio.log` <br> - Debug with `crictl` tool                              | "How does CRI-O compare with Docker for a Kubernetes-only environment?"             |
| **Rootless Docker** | Docker running without requiring root privileges                             | Reduces risk of container escape or host compromise     | When developers donâ€™t have root or security wants non-root containers | - Use `docker info --format '{{json .SecurityOptions}}'` <br> - Debug with `dockerd-rootless-setuptool.sh` | "Can you explain how to enable and manage Rootless Docker in a secure environment?" |
| **BuildKit**        | Next-gen Docker image builder with better performance, caching, and features | Parallel build, remote cache, secrets mgmt              | Complex Dockerfiles or multi-platform builds                          | - Use `DOCKER_BUILDKIT=1` <br> - Debug with `--progress=plain`                                             | "Why do you prefer BuildKit over the classic Docker build system in CI/CD?"         |
